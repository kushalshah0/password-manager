<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Password Manager</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --clr-bg: #ffffff;
      --clr-text: #374151;
      --clr-text-muted: #6b7280;
      --clr-primary: #111827;
      --clr-primary-hover: #1f2937;
      --clr-accent: #3b82f6;
      --shadow-light: 0 4px 12px rgba(0,0,0,0.05);
      --radius: 0.75rem;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background-color: var(--clr-bg);
      color: var(--clr-text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 72px; /* nav height */
      line-height: 1.6;
    }

    /* Container */
    .container {
      max-width: 720px;
      width: 100%;
      padding: 0 1.5rem;
    }

    /* Sticky Navigation */
    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 72px;
      background: var(--clr-bg);
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
      box-shadow: var(--shadow-light);
      z-index: 1000;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--clr-primary);
      user-select: none;
      letter-spacing: 0.05em;
    }

    nav {
      display: flex;
      gap: 1.5rem;
    }

    nav button {
      background: none;
      border: none;
      font-weight: 600;
      font-size: 1rem;
      color: var(--clr-text-muted);
      cursor: pointer;
      padding: 0.5rem 0.75rem;
      border-radius: var(--radius);
      transition: var(--transition);
    }
    nav button:hover,
    nav button[aria-current="page"] {
      color: var(--clr-accent);
      background-color: #e0f2fe;
      box-shadow: 0 0 8px rgba(59,130,246,0.3);
      outline-offset: 2px;
    }
    nav button:focus-visible {
      outline: 2px solid var(--clr-accent);
      outline-offset: 2px;
    }

    /* Forms */
    form {
      background-color: var(--clr-bg);
      padding: 2rem 2rem 2.5rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow-light);
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      margin-top: 3rem;
    }

    form h2 {
      font-weight: 700;
      font-size: 2rem;
      margin: 0 0 0.5rem 0;
      color: var(--clr-primary);
    }

    label {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--clr-text-muted);
      margin-bottom: 0.25rem;
      display: block;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"] {
      width: 100%;
      padding: 0.6rem 0.75rem;
      font-size: 1rem;
      border: 1px solid #d1d5db;
      border-radius: var(--radius);
      transition: var(--transition);
      font-family: inherit;
      color: var(--clr-text);
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="password"]:focus {
      outline: none;
      border-color: var(--clr-accent);
      box-shadow: 0 0 5px var(--clr-accent);
    }

    button[type="submit"] {
      background-color: var(--clr-accent);
      color: #fff;
      font-weight: 700;
      font-size: 1rem;
      padding: 0.75rem;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 8px rgba(59,130,246,0.4);
    }
    button[type="submit"]:hover,
    button[type="submit"]:focus-visible {
      background-color: #2563eb;
      box-shadow: 0 6px 12px rgba(37,99,235,0.6);
      outline: none;
    }

    /* Dashboard */
    .dashboard {
      margin-top: 3rem;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .dashboard h1 {
      font-weight: 800;
      font-size: 2.5rem;
      color: var(--clr-primary);
      margin-bottom: 1rem;
      user-select: none;
    }

    .passwords-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .password-card {
      background-color: #f9fafb;
      border-radius: var(--radius);
      box-shadow: var(--shadow-light);
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition);
      cursor: default;
    }
    .password-card:hover {
      box-shadow: 0 6px 15px rgba(0, 131, 255, 0.15);
      transform: translateY(-2px);
    }

    .password-info {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      max-width: 70%;
      overflow-wrap: anywhere;
    }
    .password-info .site {
      font-weight: 700;
      font-size: 1.125rem;
      color: var(--clr-primary);
    }
    .password-info .username {
      font-size: 0.9rem;
      color: var(--clr-text-muted);
    }
    .password-info .password {
      font-family: monospace;
      font-size: 1rem;
      color: #6366f1;
      letter-spacing: 0.05em;
    }

    /* Responsive */
    @media (max-width: 480px) {
      .password-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      .password-info {
        max-width: 100%;
      }
      nav {
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo" aria-label="Password Manager Logo">PassKeep</div>
    <nav role="navigation" aria-label="Main Navigation">
      <button id="nav-login" aria-current="page" type="button">Login</button>
      <button id="nav-signup" type="button">Sign Up</button>
      <button id="nav-dashboard" type="button" style="display:none;">Dashboard</button>
    </nav>
  </header>
  <main class="container" id="main-content" role="main">
    <!-- Login Form -->
    <form id="login-form" aria-label="Login form">
      <h2>Login</h2>
      <label for="login-email">Email</label>
      <input type="email" id="login-email" name="email" autocomplete="email" required />
      <label for="login-password">Password</label>
      <input type="password" id="login-password" name="password" autocomplete="current-password" required />
      <button type="submit">Log In</button>
    </form>
    <!-- Signup Form -->
    <form id="signup-form" aria-label="Sign up form" style="display: none;">
      <h2>Sign Up</h2>
      <label for="signup-username">Username</label>
      <input type="text" id="signup-username" name="username" autocomplete="username" required />
      <label for="signup-email">Email</label>
      <input type="email" id="signup-email" name="email" autocomplete="email" required />
      <label for="signup-password">Password</label>
      <input type="password" id="signup-password" name="password" autocomplete="new-password" required />
      <label for="signup-password-confirm">Confirm Password</label>
      <input type="password" id="signup-password-confirm" name="passwordConfirm" autocomplete="new-password" required />
      <button type="submit">Create Account</button>
    </form>
    <!-- Dashboard -->
    <section id="dashboard" class="dashboard" style="display:none;">
      <h1>Hello, <span id="user-name-display" aria-live="polite"></span>!</h1>
      <div class="passwords-list" aria-label="Stored passwords">
        <!-- Password cards inserted dynamically -->
      </div>
    </section>
  </main>
  <script>
    (function(){
      const navLogin = document.getElementById('nav-login');
      const navSignup = document.getElementById('nav-signup');
      const navDashboard = document.getElementById('nav-dashboard');

      const loginForm = document.getElementById('login-form');
      const signupForm = document.getElementById('signup-form');
      const dashboardSection = document.getElementById('dashboard');
      const userNameDisplay = document.getElementById('user-name-display');
      const passwordsList = dashboardSection.querySelector('.passwords-list');

      // Simulate a "backend" with localStorage for demo
      function getUsers() {
        return JSON.parse(localStorage.getItem('users')||'{}');
      }
      function setUsers(users) {
        localStorage.setItem('users', JSON.stringify(users));
      }

      function getCurrentUser() {
        return JSON.parse(sessionStorage.getItem('currentUser')||'null');
      }
      function setCurrentUser(user) {
        sessionStorage.setItem('currentUser', JSON.stringify(user));
      }
      function logout() {
        setCurrentUser(null);
        dashboardSection.style.display = 'none';
        loginForm.style.display = 'block';
        navDashboard.style.display = 'none';
        navLogin.style.display = 'inline-block';
        navSignup.style.display = 'inline-block';
        setNavActiveButton('nav-login');
      }

      function setNavActiveButton(activeId){
        [navLogin, navSignup, navDashboard].forEach(btn=>{
          btn.setAttribute('aria-current', '');
          if(btn.id === activeId) {
            btn.setAttribute('aria-current', 'page');
          }
        });
      }

      // Switch views functions
      function showLogin() {
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
        dashboardSection.style.display = 'none';
        navDashboard.style.display = 'none';
        navLogin.style.display = 'inline-block';
        navSignup.style.display = 'inline-block';
        setNavActiveButton('nav-login');
      }
      function showSignup() {
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
        dashboardSection.style.display = 'none';
        navDashboard.style.display = 'none';
        navLogin.style.display = 'inline-block';
        navSignup.style.display = 'inline-block';
        setNavActiveButton('nav-signup');
      }
      function showDashboard(user){
        loginForm.style.display = 'none';
        signupForm.style.display = 'none';
        dashboardSection.style.display = 'flex';
        navDashboard.style.display = 'inline-block';
        navLogin.style.display = 'none';
        navSignup.style.display = 'none';
        setNavActiveButton('nav-dashboard');

        userNameDisplay.textContent = user.username || user.email || 'User';
        renderPasswords(user.passwords || []);
      }

      function renderPasswords(passwords){
        passwordsList.innerHTML = '';
        if(passwords.length === 0){
          const emptyMsg = document.createElement('p');
          emptyMsg.textContent = 'No stored passwords.';
          emptyMsg.style.color = '#9ca3af';
          passwordsList.appendChild(emptyMsg);
          return;
        }
        passwords.forEach(({site, username, password}, idx) => {
          const card = document.createElement('div');
          card.className = 'password-card';
          card.tabIndex = 0;
          card.setAttribute('role', 'listitem');

          const info = document.createElement('div');
          info.className = 'password-info';

          const siteEl = document.createElement('div');
          siteEl.className = 'site';
          siteEl.textContent = site;

          const userEl = document.createElement('div');
          userEl.className = 'username';
          userEl.textContent = username;

          const passEl = document.createElement('div');
          passEl.className = 'password';
          passEl.setAttribute('aria-label', 'Password');
          passEl.textContent = password;

          info.appendChild(siteEl);
          info.appendChild(userEl);
          info.appendChild(passEl);

          card.appendChild(info);

          passwordsList.appendChild(card);
        });
      }

      // Initialize the nav buttons' event listeners
      navLogin.addEventListener('click', showLogin);
      navSignup.addEventListener('click', showSignup);
      navDashboard.addEventListener('click', () => {
        const user = getCurrentUser();
        if(user) {
          showDashboard(user);
        } else {
          logout();
        }
      });

      // Handle Signup form submit
      signupForm.addEventListener('submit', e => {
        e.preventDefault();
        // Simple validation
        const username = signupForm['username'].value.trim();
        const email = signupForm['email'].value.trim().toLowerCase();
        const password = signupForm['password'].value;
        const passwordConfirm = signupForm['passwordConfirm'].value;
        if(password !== passwordConfirm) {
          alert('Passwords do not match.');
          return;
        }
        if(username.length < 3) {
          alert('Username should be at least 3 characters.');
          return;
        }
        let users = getUsers();
        if(users[email]) {
          alert('An account with this email already exists.');
          return;
        }
        // Save user with some example stored passwords:
        users[email] = {
          username,
          email,
          password,
          passwords: [
            { site: 'Example.com', username: 'user123', password: 'p@ssw0rd!' },
            { site: 'MyBank', username: 'user_bank', password: 'secure1234' }
          ]
        };
        setUsers(users);
        setCurrentUser(users[email]);
        showDashboard(users[email]);
      });

      // Handle Login form submit
      loginForm.addEventListener('submit', e => {
        e.preventDefault();
        let email = loginForm['email'].value.trim().toLowerCase();
        let password = loginForm['password'].value;
        let users = getUsers();
        if(!users[email]) {
          alert('No account found with this email.');
          return;
        }
        let user = users[email];
        if(user.password !== password) {
          alert('Incorrect password.');
          return;
        }
        setCurrentUser(user);
        showDashboard(user);
      });

      // On page load, check if user already logged in
      window.addEventListener('load', () => {
        const currentUser = getCurrentUser();
        if(currentUser){
          showDashboard(currentUser);
        } else {
          showLogin();
        }
      });
    })();
  </script>
</body>
</html>

